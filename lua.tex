\documentclass{article}

\begin{document}

\directlua {
  locals V = lpeg.V, C = lpeg.C, P = lpeg.P

  local Number = lpeg.C(lpeg.P"-"^-1 * lpeg.R("09")^1) * Space

  function makeparser
    mathparser = lpeg.P {"math"    }
  end

  function parsemath(math)
    return "xxx"
  end
}


Test

\directlua { 
  print()
  print()
  print(parsemath("1+2^3")) 
  print()
}

\end{document}
